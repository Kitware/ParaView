Application ExitOnReturnOn

for {set i  0} {$i < [expr $argc - 1]} {incr i} {
   if {[lindex $argv $i] == "-A"} {
      set auto_path "$auto_path [lindex $argv [expr $i +1]]"
   }
}

vtkDebugLeaks rtDebugLeaks
rtDebugLeaks PromptUserOff
rtDebugLeaks Delete

vtkObject a
a GlobalWarningDisplayOff
a Delete

proc rtOtherTest { fileid } {
#actual test
    set all [lsort [info command vtk*]]
    foreach a $all {
	if [string match "vtkTemp*" $a ] {
	    continue
        }
        if {$a == "vtkTkRenderWidget"} {
           continue
        }
        if {$a == "vtkCommand"} {
            continue
        }
        if {$a == "vtkIndent"} {
            continue
        }
        if {$a == "vtkOutputPort"} {
            continue
        }
        if {$a == "vtkTimeStamp"} {
            continue
        }
        if {$a == "vtkOutputWindow"} {
           continue
        }
        if {$a == "vtkKWApplication"} {
           continue
        }
        if {$a == "vtkPVApplication"} {
           continue
        }
	if { [ catch {
           $a b
           b Print
           if {[b IsA $a] == 0} {puts stderr "$a failed IsA test!!!"}
           if {[b IsA "vtkObject"] == 0} {puts stdout "$a is not a sub-class of vtkObject"}
	   if { [catch { b Create } res ] == 0 } {
		puts "Class [ b GetClassName ] has Create method"
		puts "which can be called with no application"
           }
           b GetClassName
           b Delete
        } fres ] != 0 } {
          puts "Error pass 1 for class $a: $fres"
	  Application SetExitStatus 1
        }
        if { [ catch {
           $a b 
           $a c 
           set d [b SafeDownCast c]
           b Delete
           c Delete
        } fres ] != 0 } {
          puts "Error pass 2 for class $a: $fres"
	  Application SetExitStatus 1
        }
    }
}

# All tests should end with the following...

rtOtherTest stdout

Application Exit

