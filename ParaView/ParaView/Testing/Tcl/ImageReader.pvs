if {[info exists argc]} { 
    set argcm1 [expr $argc - 1]
    for {set i 0} {$i < $argcm1} {incr i} {
        if {[lindex $argv $i] == "-D" && $i < $argcm1} {
		set DataDir [lindex $argv [expr $i + 1]]
        }
    }
} 


set pv(vtkTemp1) [Application GetMainWindow]
set pv(vtkTemp43) [$pv(vtkTemp1) GetMainView]

set pv(vtkTemp98) [$pv(vtkTemp1) CreatePVSource vtkImageReader]
$pv(vtkTemp1) SetCurrentPVSource $pv(vtkTemp98)
$pv(vtkTemp1) ShowCurrentSourceProperties
set pv(vtkTemp110) [$pv(vtkTemp98) GetPVWidget {FilePrefix}]
$pv(vtkTemp110) SetValue $DataDir/Data/headsq/quarter
set pv(vtkTemp120) [$pv(vtkTemp98) GetPVWidget {Extent}]
$pv(vtkTemp120) SetValue 0 63 0 63 1 64
$pv(vtkTemp98) AcceptCallback

set pv(vtkTemp187) [$pv(vtkTemp1) ContourCallback]
$pv(vtkTemp1) SetCurrentPVSource $pv(vtkTemp187)
$pv(vtkTemp1) ShowCurrentSourceProperties
set pv(vtkTemp198) [$pv(vtkTemp187) GetPVWidget {Contour Values}]
$pv(vtkTemp198) RemoveAllValues
$pv(vtkTemp198) AddValue 600.000000
set pv(vtkTemp204) [$pv(vtkTemp187) GetPVWidget {Compute Normals}]
$pv(vtkTemp204) SetState 0
$pv(vtkTemp187) AcceptCallback

set activeCamera [Ren1 GetActiveCamera]
$activeCamera SetPosition 31.5 250.821 20.5266
$activeCamera SetFocalPoint 31.5 31.5 31.5
$activeCamera SetViewUp 0 -0.049971 -0.998751
$activeCamera SetViewAngle 30
$activeCamera SetClippingRange 151.66 305.641

$pv(vtkTemp1) ResetCameraCallback

# Fix the size of the image.
RenWin1 SetSize 300 300
RenWin1 Render
update

for {set i  1} {$i < [expr $argc - 1]} {incr i} {
    if {[lindex $argv $i] == "-C"} {
	source [lindex $argv [expr $i + 1]]
	$Application SetExitStatus [CompareImage [[Application GetMainWindow] GetMainView]]
    }
}
   
Application Exit
